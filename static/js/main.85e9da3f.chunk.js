(this.webpackJsonpwordGuess=this.webpackJsonpwordGuess||[]).push([[0],{12:function(t,e,n){},16:function(t,e,n){t.exports=n(26)},26:function(t,e,n){"use strict";n.r(e);var s=n(0),i=n.n(s),a=n(13),r=n.n(a),o=(n(12),n(10)),u=n(1),l=n.n(u),c=n(8),h=n(2),g=n(3),p=n(6),m=n(5),f=n(14),d=n.n(f),y=(n(22),n(4)),b=String.fromCharCode(160),v=function(){function t(e){if(Object(h.a)(this,t),(this instanceof t?this.constructor:void 0)===t)throw new TypeError("cannot instantiate HintHandler class");if(void 0===this.computeGuessCharColor)throw new TypeError("class ".concat(this.constructor.name," did not implement computeGuessCharColor method"));if(void 0===this.formatGuessTotals)throw new TypeError("class ".concat(this.constructor.name," did not implement formatGuessTotals method"));if(void 0===this.comparePosMaps)throw new TypeError("class ".concat(this.constructor.name," did not implement comparePosMaps method"));this.gameObj=e}return Object(g.a)(t,[{key:"checkUseAllHints",value:function(t){for(var e=this.gameObj.guessList.length-1;e>=0;e--){var n=this.gameObj.guessList[e],s=n.posMap,i=this.gameObj.doCompare(n.guess,t),a=this.comparePosMaps(s,i,t,n);if(null!==a)return a}return null}},{key:"policyIncludes",value:function(t){return 0!==(this.gameObj.settings.hintUsePolicy&t)}}],[{key:"getHintHandler",value:function(t){return t.settings.noMarkGuessChars?new k(t):new w(t)}}]),t}(),w=function(t){Object(p.a)(n,t);var e=Object(m.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"computeGuessCharColor",value:function(t,e,n,s){var i="white";return t.posMap[e]===x?(i="lightgreen",this.gameObj.greenString+=" ".concat(n)):t.posMap[e]===L?(i="yellow",this.gameObj.yellowString+=" ".concat(n)):s&&(this.gameObj.greyString+=" ".concat(n),this.gameObj.notInPool.add(n)),i}},{key:"formatGuessTotals",value:function(t,e){}},{key:"genErrMsg",value:function(t,e,n,s,i){var a=i[n];if(e===x)return"chr ".concat(n+1," must be ").concat(a,", ");if(this.policyIncludes(P)&&e===G)return"must not use ".concat(a,", ");if(this.policyIncludes(R)&&e===L){if(t===x)return"chr ".concat(n+1," must not be ").concat(a,", ");if(t===G)return"must contain ".concat(a,", ")}return""}},{key:"comparePosMaps",value:function(t,e,n,s){for(var i=n.length,a="",r=0;r<i;r++){var o=e[r],u=t[r];o!==u&&(a+=this.genErrMsg(o,u,r,n,s.guess))}return a.length>0&&(a+="see ".concat(s.guess)),a}},{key:"possibleListFilter",value:function(t,e){return t.every((function(t,n){return t===e[n]}))}}]),n}(v),k=function(t){Object(p.a)(n,t);var e=Object(m.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"computeGuessCharColor",value:function(t,e,n,s){return s&&t.posMap.every((function(t){return t===G}))&&this.gameObj.notInPool.add(n),"white"}},{key:"styleForTotals",value:function(t){return{borderRadius:"50%",height:"20px",width:"20px",display:"inline-block",marginLeft:"10px",marginBottom:"5px",textAlign:"center",backgroundColor:t===x?"lightgreen":"yellow"}}},{key:"formatGuessTotals",value:function(t,e){var n=this,s=this.countVals(t.posMap),a=Object(y.a)(s,2),r=a[0],o=a[1];[x,L].forEach((function(t){var s=t===x?r:o;e.push(i.a.createElement("div",{style:n.styleForTotals(t)},s))}))}},{key:"countVals",value:function(t){var e=Array.from([0,0,0]);return t.forEach((function(t){return e[t-1]++})),e}},{key:"genCountSpans",value:function(t,e){var n=this.policyIncludes(R)?i.a.createElement("span",{style:this.styleForTotals(L)},e):"";return i.a.createElement(s.Fragment,null,i.a.createElement("span",{style:this.styleForTotals(x)},t),n)}},{key:"comparePosMaps",value:function(t,e,n,a){var r=this.countVals(t),o=Object(y.a)(r,2),u=o[0],l=o[1],c=this.countVals(e),h=Object(y.a)(c,2),g=h[0],p=h[1],m=null;return(u!==g||this.policyIncludes(R)&&l!==p)&&(m=i.a.createElement(s.Fragment,null,"from ".concat(a.guess,", need "),this.genCountSpans(u,l),",".concat(b).concat(b,"not "),this.genCountSpans(g,p))),m}},{key:"possibleListFilter",value:function(t,e){var n=this.countVals(t),s=Object(y.a)(n,2),i=s[0],a=s[1],r=this.countVals(e),o=Object(y.a)(r,2),u=o[0],l=o[1];return i===u&&a===l}}]),n}(v),E=n(15),O=n.n(E),S=String.fromCharCode(160),C=function(t){Object(p.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.call(this)).state={settings:{}},t}return Object(g.a)(n,[{key:"updateSettings",value:function(t,e){this.settings[t]=e,this.setState({settings:this.settings})}},{key:"getSwitch",value:function(t){var e=this;return i.a.createElement("input",{type:"checkbox",checked:this.settings[t],onChange:function(){return e.updateSettings(t,!e.props.gameObj.settings[t])},id:t,height:15,width:30,style:{float:"left"}})}},{key:"genSwitchSetting",value:function(t,e){return i.a.createElement("div",{key:this.switchKey++,style:{float:"left",width:"300px"}},i.a.createElement("span",{style:{fontSize:"14px"}},"".concat(e).concat(S).concat(S)," "),i.a.createElement("div",{style:{float:"right"}},this.getSwitch(t)),i.a.createElement("br",null))}},{key:"genNumericInputSetting",value:function(t,e){var n=this;return i.a.createElement("div",{style:{float:"left",width:"320px"}},i.a.createElement("span",{style:{fontSize:"14px"}},e),i.a.createElement("div",{style:{float:"right"}},i.a.createElement(O.a,{id:t,min:5,max:8,value:this.settings[t]||"",onChange:function(e){return n.updateSettings(t,e)},style:{border:"1px solid black",input:{marginLeft:"5px",height:"18px",width:"40px"}}})))}},{key:"genRadioSetting",value:function(t,e,n,a,r){var o=this,u=r?"":i.a.createElement("br",null);return i.a.createElement(s.Fragment,null,i.a.createElement("input",{type:"radio",value:parseInt(e),name:t,key:a,checked:this.settings[t]===parseInt(e),style:{marginLeft:"15px"},onChange:function(t){var e=t.target.name,n=parseInt(t.target.value);o.updateSettings(e,n)}}),n,u)}},{key:"genRadioGroupSetting",value:function(t,e,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n.map((function(e,n){var s=Object(y.a)(e,2),i=s[0],o=s[1];return a.genRadioSetting(t,o,i,n,r)}));return i.a.createElement(s.Fragment,null,e,i.a.createElement("br",null),i.a.createElement("div",{value:this.settings[t]},o))}},{key:"render",value:function(){var t=this;return this.gameObj=this.props.gameObj,this.settings=this.gameObj.settings,i.a.createElement("div",null,i.a.createElement("button",{style:{marginRight:"10px",marginBottom:"5px"},onClick:function(){t.gameObj.setState({useGamePage:!0}),t.gameObj.startNewGame()}},String.fromCharCode(11013)),"Settings",i.a.createElement("br",null),i.a.createElement("div",{style:{width:"300px",display:"inline-block",fontSize:"14px"}},this.genRadioGroupSetting("wordlen","Word Length (longer=harder)",[["5",5],["6",6],["7",7],["8",8]],!0),i.a.createElement("br",null),this.genSwitchSetting("guessMustBeWord","Guess must be word? (harder)"),this.genSwitchSetting("noMarkGuessChars","Not Mark Guess Chars? (much harder)"),this.genRadioGroupSetting("hintUsePolicy","Hint Reuse Requirements",[["None (most flexible)",0],["Must Reuse Green (slightly harder)",M],["Must Reuse Green and Yellow (harder)",M+R],["Must Reuse All Hints (hardest and annoying)",M+R+P]])))}}]),n}(s.Component),j=String.fromCharCode(160),x=1,L=2,G=3,M=2,R=4,P=8,I=function(t){Object(p.a)(n,t);var e=Object(m.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.call(this)).settings={wordlen:5,guessMustBeWord:!0,noMarkGuessChars:!1,hintUsePolicy:M},t.state={layoutName:"default",input:"",letterMap:{},guessList:[],useGamePage:!0,settings:t.settings,message:null},t.useVirtKeyboard=!1,t.answer="",t.focusRef=i.a.createRef(),t}return Object(g.a)(n,[{key:"tempAlert",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"red",s=document.createElement("div");return s.setAttribute("style","position:absolute;                             top:0%; left:10%;                              background-color:".concat(n,";                              border-color:black;                              border-width:1px;                              ")),s.innerHTML=t,setTimeout((function(){s.parentNode.removeChild(s)}),e),document.body.appendChild(s),new Promise((function(t){return setTimeout(t,e)}))}},{key:"componentDidMount",value:function(){var t=Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.startNewGame(),this.focusRef&&this.focusRef.current&&this.focusRef.focus();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.focusRef&&this.focusRef.current&&(console.log("did update",this.focusref),this.focusRef.focus())}},{key:"startNewGame",value:function(){var t=Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.guessList=[],this.input="",this.switchKey=0,this.hintHandler=v.getHintHandler(this),t.next=6,this.buildWordList(this.settings.wordlen);case 6:this.possibleList=Array.from(this.wordList),this.answer=this.wordList[Math.floor(Math.random()*this.wordList.length)].toUpperCase(),console.log("this.answer =",this.answer),this.setState({input:this.input,guessList:this.guessList,gameOver:!1,message:null}),this.focusRef.current&&this.focusRef.focus();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"buildWordList",value:function(){var t=Object(c.a)(l.a.mark((function t(e){var n,s,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this.curAnswerLen){t.next=2;break}return t.abrupt("return");case 2:return this.curAnswerLen=e,n="./ospd".concat(e,".txt"),t.next=6,fetch(n);case 6:return s=t.sent,console.log("fetch complete"),t.next=10,s.text();case 10:return i=t.sent,t.next=13,i.split("\n");case 13:return this.wordList=t.sent,t.next=16,this.wordList.map((function(t){return t.toUpperCase()}));case 16:this.wordList=t.sent,console.log("wordlist for len ".concat(e," built"));case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"doCompare",value:function(t,e){var n=Object(o.a)(t),s=Object(o.a)(e),i=new Array(this.settings.wordlen).fill(G);return n.forEach((function(t,e){t===s[e]&&(s[e]=null,n[e]=null,i[e]=x)})),n.forEach((function(t,e){if(null!==t){var n=s.indexOf(t);n>=0&&(s[n]=null,i[e]=L)}})),i}},{key:"mostRecentGuess",value:function(){return this.guessList.length>0?this.guessList.slice(-1)[0]:null}},{key:"doInputSubmit",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e,n,s,i,a=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!0,this.input.length===this.answer.length){t.next=3;break}return t.abrupt("return");case 3:this.settings.guessMustBeWord&&!this.wordList.includes(this.input)?(this.setMessage("Guess must be a Legal Scrabble Word"),e=!1):0!==this.settings.hintUsePolicy&&this.guessList.length>0&&(n=this.hintHandler.checkUseAllHints(this.input))&&(this.setMessage(n,"rgb(230,230,230)"),e=!1),e&&(s=this.doCompare(this.input,this.answer),this.guessList.push({guess:this.input,index:this.guessList.length,posMap:s}),i=s,this.possibleList=this.possibleList.filter((function(t){var e=a.doCompare(a.input,t);return a.hintHandler.possibleListFilter(e,i)})),s.every((function(t){return t===x}))&&this.setState({gameOver:!0,message:this.buildGameOverMessage()})),e&&(this.input="",this.useVirtKeyboard&&this.keyboard.clearInput()),this.setState({input:this.input,guessList:this.guessList});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onVirtKeyPress",value:function(t){"{enter}"===t&&this.doInputSubmit()}},{key:"onRealKeyDown",value:function(t){if(!this.state.gameOver){var e=t.nativeEvent.key;"Backspace"===e&&null!=this.state.message&&this.setState({message:null}),"Enter"===e?this.doInputSubmit():"Backspace"===e&&this.input.length>0?(this.input=this.input.slice(0,-1),this.setState({input:this.input})):(e=e.toUpperCase(),"ABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(e)&&(this.input+=e,this.input.length>this.answer.length&&(this.input=this.input.substring(0,this.answer.length)),this.setState({input:this.input})))}}},{key:"onChange",value:function(t){t.length>this.answer.length&&(t=t.substring(0,this.answer.length),this.keyboard.setInput(t)),this.input=t,this.setState({input:t})}},{key:"formatGuess",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],s=t.guess,a=0;a<this.answer.length;a++){var r=a<s.length?s[a]:j,o=this.hintHandler.computeGuessCharColor(t,a,r,e);n.push(i.a.createElement("div",{key:a,style:{border:"1px solid black",backgroundColor:o,height:"20px",width:"20px",display:"inline-block",marginLeft:"5px",marginBottom:"5px",marginTop:"5px",textAlign:"center"}},r))}return e&&this.hintHandler.formatGuessTotals(t,n),n}},{key:"getVirtKeyboard",value:function(){var t=this;return this.useVirtKeyboard?i.a.createElement(d.a,{keyboardRef:function(e){return t.keyboard=e},onKeyPress:this.onVirtKeyPress.bind(this),onChange:this.onChange.bind(this),theme:"hg-theme-default hg-layout-default myTheme",layoutName:this.state.layoutName,layout:{default:["Q W E R T Y U I O P","A S D F G H J K L","Z X C V B N M {bksp} {enter}"]},buttonTheme:[{class:"hg-yellow",buttons:this.yellowString},{class:"hg-green",buttons:this.greenString},{class:"hg-grey",buttons:this.greyString}],display:{"{enter}":"enter","{bksp}":"<<"}}):i.a.createElement(s.Fragment,null)}},{key:"buildGameOverMessage",value:function(){var t=this.state.guessList.length;return{html:"Match after ".concat(t," ").concat(1===t?"guess":"guesses","!"),bgcolor:"white",msgButton:i.a.createElement("button",{onClick:this.startNewGame.bind(this),style:{marginLeft:"5px"}},"Again")}}},{key:"setMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pink",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s={html:t,bgcolor:e,msgButton:n};this.setState({message:s})}},{key:"genMessageLine",value:function(){if(null===this.state.message)return i.a.createElement(s.Fragment,null);var t=null===this.state.message.msgButton?i.a.createElement(s.Fragment,null):this.state.message.msgButton;return i.a.createElement("div",{style:{backgroundColor:this.state.message.bgcolor}},i.a.createElement(i.a.Fragment,null,this.state.message.html),t)}},{key:"getPoolChars",value:function(){var t=this;return Object(o.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZ").filter((function(e){return!t.notInPool.has(e)}))}},{key:"render",value:function(){var t=this;this.yellowString=" ",this.greenString=" ",this.greyString=" ",this.notInPool=new Set;var e=[];if(this.state.guessList.forEach((function(n){e.push(t.formatGuess(n,!0)),e.push(i.a.createElement("br",null))})),!this.state.gameOver){var n={guess:this.state.input,posMap:new Array(this.settings.wordlen).fill(G)};e.push(this.formatGuess(n,!1))}var a=0===this.state.guessList.length?" ":"Pool: ".concat(this.getPoolChars().join(" "));return this.state.useGamePage?i.a.createElement(s.Fragment,null,i.a.createElement("div",null,i.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){return t.setState({useGamePage:!1})}},String.fromCharCode(9881)),"WordGuess Game,   ".concat(t.possibleList?t.possibleList.length:0," Possible")),i.a.createElement("div",{onKeyDown:t.onRealKeyDown.bind(t),tabIndex:0,ref:function(e){return t.focusRef=e}},e,t.genMessageLine()),a,t.getVirtKeyboard()):i.a.createElement(C,{gameObj:this})}}]),n}(s.Component);r.a.render(i.a.createElement(I,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.85e9da3f.chunk.js.map