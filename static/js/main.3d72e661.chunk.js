(this.webpackJsonpwordGuess=this.webpackJsonpwordGuess||[]).push([[0],{13:function(t,e,s){},17:function(t,e,s){t.exports=s(27)},27:function(t,e,s){"use strict";s.r(e);var n=s(0),a=s.n(n),i=s(14),r=s.n(i),o=(s(13),s(8)),u=s(1),l=s.n(u),c=s(11),h=s(7),g=s(2),m=s(3),p=s(6),f=s(5),d=s(15),v=s.n(d),y=(s(23),s(4)),b=String.fromCharCode(160),w=function(){function t(e){if(Object(g.a)(this,t),(this instanceof t?this.constructor:void 0)===t)throw new TypeError("cannot instantiate HintHandler class");if(void 0===this.computeGuessCharColor)throw new TypeError("class ".concat(this.constructor.name," did not implement computeGuessCharColor method"));if(void 0===this.formatGuessTotals)throw new TypeError("class ".concat(this.constructor.name," did not implement formatGuessTotals method"));if(void 0===this.comparePosMaps)throw new TypeError("class ".concat(this.constructor.name," did not implement comparePosMaps method"));this.gameObj=e}return Object(m.a)(t,[{key:"checkUseAllHints",value:function(t){for(var e=this.gameObj.guessList.length-1;e>=0;e--){var s=this.gameObj.guessList[e],n=s.posMap,a=this.gameObj.doCompare(s.guess,t),i=this.comparePosMaps(n,a,t,s);if(null!==i)return i}return null}},{key:"policyIncludes",value:function(t){return 0!==(this.gameObj.settings.hintUsePolicy&t)}}],[{key:"getHintHandler",value:function(t){return t.settings.noMarkGuessChars?new S(t):new k(t)}}]),t}(),k=function(t){Object(p.a)(s,t);var e=Object(f.a)(s);function s(){return Object(g.a)(this,s),e.apply(this,arguments)}return Object(m.a)(s,[{key:"computeGuessCharColor",value:function(t,e,s,n){var a="white";if(t.posMap[e]===x)a="lightgreen",this.gameObj.greenString+=" ".concat(s);else if(t.posMap[e]===G)a="yellow",this.gameObj.yellowString+=" ".concat(s);else if(n){0===this.getMarkedCount(t.guess,t.posMap,s)&&(this.gameObj.greyString+=" ".concat(s),this.gameObj.notInPool[s]=1)}return a}},{key:"formatGuessTotals",value:function(t,e){}},{key:"getMarkedCount",value:function(t,e,s){var n=0;return Array.from(t).forEach((function(t,a){n+=e[a]!==M&&t===s?1:0})),n}},{key:"genErrMsg",value:function(t,e,s,n,a){var i=t[s],r=e[s],o=a[s];if(r===x)return"chr ".concat(s+1," must be ").concat(o,", ");if(this.policyIncludes(I)&&r===M){var u=this.getMarkedCount(a,e,o),l=1===u?"use":"uses";return 0===u?"must not use ".concat(o,", "):"only ".concat(u," ").concat(l," of ").concat(o,", ")}if(this.policyIncludes(P)&&r===G){if(i===x)return"chr ".concat(s+1," must not be ").concat(o,", ");if(i===M)return"must use ".concat(o," somewhere, ")}return""}},{key:"comparePosMaps",value:function(t,e,s,n){for(var a=s.length,i="",r=0;r<a;r++){e[r]!==t[r]&&(i+=this.genErrMsg(e,t,r,s,n.guess))}return i.length>0&&(i+="see ".concat(n.guess)),i}},{key:"possibleListFilter",value:function(t,e){return t.every((function(t,s){return t===e[s]}))}}]),s}(w),S=function(t){Object(p.a)(s,t);var e=Object(f.a)(s);function s(){return Object(g.a)(this,s),e.apply(this,arguments)}return Object(m.a)(s,[{key:"computeGuessCharColor",value:function(t,e,s,n){return n&&t.posMap.every((function(t){return t===M}))&&(this.gameObj.notInPool[s]=1),"white"}},{key:"styleForTotals",value:function(t){return{borderRadius:"50%",height:"20px",width:"20px",display:"inline-block",marginLeft:"10px",marginBottom:"5px",textAlign:"center",backgroundColor:t===x?"lightgreen":"yellow"}}},{key:"formatGuessTotals",value:function(t,e){var s=this,n=this.countVals(t.posMap),i=Object(y.a)(n,2),r=i[0],o=i[1];[x,G].forEach((function(t){var n=t===x?r:o;e.push(a.a.createElement("div",{style:s.styleForTotals(t)},n))}))}},{key:"countVals",value:function(t){var e=Array.from([0,0,0]);return t.forEach((function(t){return e[t-1]++})),e}},{key:"genCountSpans",value:function(t,e){var s=this.policyIncludes(P)?a.a.createElement("span",{style:this.styleForTotals(G)},e):"";return a.a.createElement(n.Fragment,null,a.a.createElement("span",{style:this.styleForTotals(x)},t),s)}},{key:"comparePosMaps",value:function(t,e,s,i){var r=this.countVals(t),o=Object(y.a)(r,2),u=o[0],l=o[1],c=this.countVals(e),h=Object(y.a)(c,2),g=h[0],m=h[1],p=null;return(u!==g||this.policyIncludes(P)&&l!==m)&&(p=a.a.createElement(n.Fragment,null,"from ".concat(i.guess,", need "),this.genCountSpans(u,l),",".concat(b).concat(b,"not "),this.genCountSpans(g,m))),p}},{key:"possibleListFilter",value:function(t,e){var s=this.countVals(t),n=Object(y.a)(s,2),a=n[0],i=n[1],r=this.countVals(e),o=Object(y.a)(r,2),u=o[0],l=o[1];return a===u&&i===l}}]),s}(w),O=s(16),E=s.n(O),L=String.fromCharCode(160),C=function(t){Object(p.a)(s,t);var e=Object(f.a)(s);function s(){var t;return Object(g.a)(this,s),(t=e.call(this)).state={settings:{}},t}return Object(m.a)(s,[{key:"updateSettings",value:function(t,e){this.settings[t]=e,this.setState({settings:this.settings})}},{key:"getSwitch",value:function(t){var e=this;return a.a.createElement("input",{type:"checkbox",checked:this.settings[t],onChange:function(){return e.updateSettings(t,!e.props.gameObj.settings[t])},id:t,height:15,width:30,style:{float:"left"}})}},{key:"genSwitchSetting",value:function(t,e){return a.a.createElement("div",{key:this.switchKey++,style:{float:"left",width:"300px"}},a.a.createElement("span",{style:{fontSize:"14px"}},"".concat(e).concat(L).concat(L)," "),a.a.createElement("div",{style:{float:"right"}},this.getSwitch(t)),a.a.createElement("br",null))}},{key:"genNumericInputSetting",value:function(t,e){var s=this;return a.a.createElement("div",{style:{float:"left",width:"320px"}},a.a.createElement("span",{style:{fontSize:"14px"}},e),a.a.createElement("div",{style:{float:"right"}},a.a.createElement(E.a,{id:t,min:5,max:8,value:this.settings[t]||"",onChange:function(e){return s.updateSettings(t,e)},style:{border:"1px solid black",input:{marginLeft:"5px",height:"18px",width:"40px"}}})))}},{key:"genRadioSetting",value:function(t,e,s,i,r){var o=this,u=r?"":a.a.createElement("br",null);return a.a.createElement(n.Fragment,null,a.a.createElement("input",{type:"radio",value:parseInt(e),name:t,key:i,checked:this.settings[t]===parseInt(e),style:{marginLeft:"15px"},onChange:function(t){var e=t.target.name,s=parseInt(t.target.value);o.updateSettings(e,s)}}),s,u)}},{key:"genRadioGroupSetting",value:function(t,e,s){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=s.map((function(e,s){var n=Object(y.a)(e,2),a=n[0],o=n[1];return i.genRadioSetting(t,o,a,s,r)}));return a.a.createElement(n.Fragment,null,e,a.a.createElement("br",null),a.a.createElement("div",{value:this.settings[t]},o))}},{key:"render",value:function(){var t=this;return this.gameObj=this.props.gameObj,this.settings=this.gameObj.settings,this.switchKey=0,a.a.createElement("div",null,a.a.createElement("button",{style:{marginRight:"10px",marginBottom:"5px"},onClick:function(){t.gameObj.setState({useGamePage:!0}),t.gameObj.startNewGame()}},String.fromCharCode(11013)),"Settings (will start new Game)",a.a.createElement("br",null),a.a.createElement("div",{style:{width:"300px",display:"inline-block",fontSize:"14px"}},this.genRadioGroupSetting("wordlen","Word Length (longer=harder)",[["5",5],["6",6],["7",7],["8",8]],!0),a.a.createElement("br",null),this.genSwitchSetting("guessMustBeWord","Guess must be word? (harder)"),this.genSwitchSetting("noMarkGuessChars","Not Mark Guess Chars? (much harder)"),this.genRadioGroupSetting("hintUsePolicy","Hint Reuse Requirements",[["None (most flexible)",0],["Must Reuse Green (slightly harder)",R],["Must Reuse Green and Yellow (harder)",R+P],["Must Reuse All Hints (hardest and annoying)",R+P+I]])))}}]),s}(n.Component),j=String.fromCharCode(160),x=1,G=2,M=3,R=2,P=4,I=8,H=["state","settings","useVirtKeyboard","answer","guessList","gameOver","message","keyboard"],T=function(t){Object(p.a)(s,t);var e=Object(f.a)(s);function s(){var t;Object(g.a)(this,s),t=e.call(this);var n=window.localStorage.getItem("wordguessSavedState");return n?t.restoreSavedState(n):(t.state={},t.setDefaultGameState()),t}return Object(m.a)(s,[{key:"setDefaultGameState",value:function(){console.log("setting default game state"),this.settings={wordlen:5,guessMustBeWord:!0,noMarkGuessChars:!1,hintUsePolicy:R},this.useVirtKeyboard=!1,this.answer="",this.focusRef=a.a.createRef(),this.usedDefaultGameState=!0;var t={layoutName:"default",input:"",letterMap:{},guessList:[],useGamePage:!0,settings:this.settings,message:null};for(var e in t)this.setState({field:t[e]})}},{key:"restoreSavedState",value:function(){var t=Object(h.a)(l.a.mark((function t(e){var s,n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=JSON.parse(e),H.forEach((function(t){return n[t]=s[t]})),this.focusRef=a.a.createRef(),this.hintHandler=w.getHintHandler(this),t.next=6,this.buildWordList(this.settings.wordlen);case 6:this.usedDefaultGameState=!1,this.input="",this.possibleList=Array.from(this.wordList),this.guessList.forEach((function(t){n.possibleList=n.getNewPossibleList(t.guess,t.posMap)})),this.setState(Object(c.a)(Object(c.a)({},s),{},{useGamePage:!0,input:this.input,gameOver:this.gameOver,guessList:this.guessList,message:this.gameOver?this.buildGameOverMessage():""})),this.tempAlert("Restored Saved Game State",1500);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"tempAlert",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"red",n=document.createElement("div");return n.setAttribute("style","position:absolute;                             top:0%; left:10%;                              background-color:".concat(s,";                              border-color:black;                              border-width:1px;                              ")),n.innerHTML=t,setTimeout((function(){n.parentNode.removeChild(n)}),e),document.body.appendChild(n),new Promise((function(t){return setTimeout(t,e)}))}},{key:"componentDidMount",value:function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.usedDefaultGameState&&this.startNewGame(),this.focusRef&&this.focusRef.current&&this.focusRef.focus();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.focusRef&&this.focusRef.current&&(console.log("did update",this.focusref),this.focusRef.focus())}},{key:"startNewGame",value:function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.guessList=[],this.input="",this.hintHandler=w.getHintHandler(this),t.next=5,this.buildWordList(this.settings.wordlen);case 5:this.possibleList=Array.from(this.wordList),this.answer=this.wordList[Math.floor(Math.random()*this.wordList.length)].toUpperCase(),this.gameOver=!1,this.setState({input:this.input,guessList:this.guessList,gameOver:!1,message:null}),this.focusRef.current&&this.focusRef.focus();case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"buildWordList",value:function(){var t=Object(h.a)(l.a.mark((function t(e){var s,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this.curAnswerLen){t.next=2;break}return t.abrupt("return");case 2:return this.curAnswerLen=e,s="/wordguess/ospd".concat(e,".txt"),t.next=6,fetch(s);case 6:return n=t.sent,console.log("fetch complete"),t.next=10,n.text();case 10:return a=t.sent,t.next=13,a.split("\n");case 13:return this.wordList=t.sent,t.next=16,this.wordList.map((function(t){return t.toUpperCase()}));case 16:this.wordList=t.sent,console.log("wordlist for len ".concat(e," built"));case 18:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"doCompare",value:function(t,e){var s=Object(o.a)(t),n=Object(o.a)(e),a=new Array(this.settings.wordlen).fill(M);return s.forEach((function(t,e){t===n[e]&&(n[e]=null,s[e]=null,a[e]=x)})),s.forEach((function(t,e){if(null!==t){var s=n.indexOf(t);s>=0&&(n[s]=null,a[e]=G)}})),a}},{key:"mostRecentGuess",value:function(){return this.guessList.length>0?this.guessList.slice(-1)[0]:null}},{key:"getNewPossibleList",value:function(t,e){var s=this;return this.possibleList.filter((function(n){var a=s.doCompare(t,n);return s.hintHandler.possibleListFilter(a,e)}))}},{key:"doInputSubmit",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,s,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!0,this.input.length===this.answer.length){t.next=3;break}return t.abrupt("return");case 3:this.settings.guessMustBeWord&&!this.wordList.includes(this.input)?(this.setMessage("Guess must be a Legal Scrabble Word"),e=!1):0!==this.settings.hintUsePolicy&&this.guessList.length>0&&(s=this.hintHandler.checkUseAllHints(this.input))&&(this.setMessage(s,"rgb(230,230,230)"),e=!1),e&&(n=this.doCompare(this.input,this.answer),this.guessList.push({guess:this.input,index:this.guessList.length,posMap:n}),this.possibleList=this.getNewPossibleList(this.input,n),n.every((function(t){return t===x}))&&(this.gameOver=!0,this.setState({gameOver:!0,message:this.buildGameOverMessage()}))),e&&(this.input="",this.useVirtKeyboard&&this.keyboard.clearInput()),this.setState({input:this.input,guessList:this.guessList}),a=JSON.stringify(this,[].concat(H,Object(o.a)(Object.keys(this.settings)),Object(o.a)(Object.keys(this.guessList[0])))),window.localStorage.wordguessSavedState=a;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onVirtKeyPress",value:function(t){"{enter}"===t&&this.doInputSubmit()}},{key:"onRealKeyDown",value:function(t){if(!this.state.gameOver){var e=t.nativeEvent.key;"?"===e&&console.log("this.answer =",this.answer),"Backspace"===e&&null!=this.state.message&&this.setState({message:null}),"Enter"===e?this.doInputSubmit():"Backspace"===e&&this.input.length>0?(this.input=this.input.slice(0,-1),this.setState({input:this.input})):(e=e.toUpperCase(),"ABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(e)&&(this.input+=e,this.input.length>this.answer.length&&(this.input=this.input.substring(0,this.answer.length)),this.setState({input:this.input})))}}},{key:"onChange",value:function(t){t.length>this.answer.length&&(t=t.substring(0,this.answer.length),this.keyboard.setInput(t)),this.input=t,this.setState({input:t})}},{key:"formatGuess",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=[],n=t.guess,i=0;i<this.answer.length;i++){var r=i<n.length?n[i]:j,o=this.hintHandler.computeGuessCharColor(t,i,r,e);s.push(a.a.createElement("div",{key:i,style:{border:"1px solid black",backgroundColor:o,height:"20px",width:"20px",display:"inline-block",marginLeft:"5px",marginBottom:"5px",marginTop:"5px",textAlign:"center"}},r))}return e&&this.hintHandler.formatGuessTotals(t,s),s}},{key:"getVirtKeyboard",value:function(){var t=this;return this.useVirtKeyboard?a.a.createElement(v.a,{keyboardRef:function(e){return t.keyboard=e},onKeyPress:this.onVirtKeyPress.bind(this),onChange:this.onChange.bind(this),theme:"hg-theme-default hg-layout-default myTheme",layoutName:this.state.layoutName,layout:{default:["Q W E R T Y U I O P","A S D F G H J K L","Z X C V B N M {bksp} {enter}"]},buttonTheme:[{class:"hg-yellow",buttons:this.yellowString},{class:"hg-green",buttons:this.greenString},{class:"hg-grey",buttons:this.greyString}],display:{"{enter}":"enter","{bksp}":"<<"}}):a.a.createElement(n.Fragment,null)}},{key:"buildGameOverMessage",value:function(){var t=this.state.guessList.length;return{html:"Match after ".concat(t," ").concat(1===t?"guess":"guesses","!"),bgcolor:"white",msgButton:a.a.createElement("button",{onClick:this.startNewGame.bind(this),style:{marginLeft:"5px"}},"Again")}}},{key:"setMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pink",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={html:t,bgcolor:e,msgButton:s};this.setState({message:n})}},{key:"genMessageLine",value:function(){if(null===this.state.message)return a.a.createElement(n.Fragment,null);var t=null===this.state.message.msgButton?a.a.createElement(n.Fragment,null):this.state.message.msgButton;return a.a.createElement("div",{style:{backgroundColor:this.state.message.bgcolor}},a.a.createElement(a.a.Fragment,null,this.state.message.html),t)}},{key:"getPoolChars",value:function(){var t=this;return Object(o.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZ").filter((function(e){return 1!==t.notInPool[e]}))}},{key:"render",value:function(){var t=this;if(!this.state||0===Object.keys(this.state).length)return null;this.yellowString=" ",this.greenString=" ",this.greyString=" ",this.notInPool={};var e=[];if(this.guessJsxIndex=0,this.state.guessList.forEach((function(s){e.push(a.a.createElement(n.Fragment,{key:t.guessJsxIndex++},t.formatGuess(s,!0))),e.push(a.a.createElement("br",{key:t.guessJsxIndex++}))})),!this.state.gameOver&&void 0!==this.state.input){var s={guess:this.state.input,posMap:new Array(this.settings.wordlen).fill(M)};e.push(this.formatGuess(s,!1))}var i=0===this.state.guessList.length?" ":"Pool: ".concat(this.getPoolChars().join(" "));return this.state.useGamePage?a.a.createElement(n.Fragment,null,a.a.createElement("div",null,a.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){return t.setState({useGamePage:!1})}},String.fromCharCode(9881)),"WordGuess Game,   ".concat(t.possibleList?t.possibleList.length:0," Possible")),a.a.createElement("div",{onKeyDown:t.onRealKeyDown.bind(t),tabIndex:0,ref:function(e){return t.focusRef=e}},e,t.genMessageLine()),i,t.getVirtKeyboard()):a.a.createElement(C,{gameObj:this})}}]),s}(n.Component);r.a.render(a.a.createElement(T,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.3d72e661.chunk.js.map