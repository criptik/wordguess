(this.webpackJsonpwordGuess=this.webpackJsonpwordGuess||[]).push([[0],{12:function(t,e,s){},16:function(t,e,s){t.exports=s(26)},26:function(t,e,s){"use strict";s.r(e);var n=s(0),i=s.n(n),a=s(13),r=s.n(a),o=(s(12),s(9)),u=s(1),l=s.n(u),c=s(7),h=s(2),g=s(3),m=s(6),p=s(5),f=s(14),d=s.n(f),y=(s(22),s(4)),v=String.fromCharCode(160),b=function(){function t(e){if(Object(h.a)(this,t),(this instanceof t?this.constructor:void 0)===t)throw new TypeError("cannot instantiate HintHandler class");if(void 0===this.computeGuessCharColor)throw new TypeError("class ".concat(this.constructor.name," did not implement computeGuessCharColor method"));if(void 0===this.formatGuessTotals)throw new TypeError("class ".concat(this.constructor.name," did not implement formatGuessTotals method"));if(void 0===this.comparePosMaps)throw new TypeError("class ".concat(this.constructor.name," did not implement comparePosMaps method"));this.gameObj=e}return Object(g.a)(t,[{key:"checkUseAllHints",value:function(t){for(var e=this.gameObj.guessList.length-1;e>=0;e--){var s=this.gameObj.guessList[e],n=s.posMap,i=this.gameObj.doCompare(s.guess,t),a=this.comparePosMaps(n,i,t,s);if(null!==a)return a}return null}},{key:"policyIncludes",value:function(t){return 0!==(this.gameObj.settings.hintUsePolicy&t)}}],[{key:"getHintHandler",value:function(t){return t.settings.noMarkGuessChars?new k(t):new w(t)}}]),t}(),w=function(t){Object(m.a)(s,t);var e=Object(p.a)(s);function s(){return Object(h.a)(this,s),e.apply(this,arguments)}return Object(g.a)(s,[{key:"computeGuessCharColor",value:function(t,e,s,n){var i="white";if(t.posMap[e]===L)i="lightgreen",this.gameObj.greenString+=" ".concat(s);else if(t.posMap[e]===x)i="yellow",this.gameObj.yellowString+=" ".concat(s);else if(n){0===this.getMarkedCount(t.guess,t.posMap,s)&&(this.gameObj.greyString+=" ".concat(s),this.gameObj.notInPool[s]=1)}return i}},{key:"formatGuessTotals",value:function(t,e){}},{key:"getMarkedCount",value:function(t,e,s){var n=0;return Array.from(t).forEach((function(t,i){n+=e[i]!==j&&t===s?1:0})),n}},{key:"genErrMsg",value:function(t,e,s,n,i){var a=t[s],r=e[s],o=i[s];if(r===L)return"chr ".concat(s+1," must be ").concat(o,", ");if(this.policyIncludes(R)&&r===j){var u=this.getMarkedCount(i,e,o),l=1===u?"use":"uses";return 0===u?"must not use ".concat(o,", "):"only ".concat(u," ").concat(l," of ").concat(o,", ")}if(this.policyIncludes(P)&&r===x){if(a===L)return"chr ".concat(s+1," must not be ").concat(o,", ");if(a===j)return"must use ".concat(o," somewhere, ")}return""}},{key:"comparePosMaps",value:function(t,e,s,n){for(var i=s.length,a="",r=0;r<i;r++){e[r]!==t[r]&&(a+=this.genErrMsg(e,t,r,s,n.guess))}return a.length>0&&(a+="see ".concat(n.guess)),a}},{key:"possibleListFilter",value:function(t,e){return t.every((function(t,s){return t===e[s]}))}}]),s}(b),k=function(t){Object(m.a)(s,t);var e=Object(p.a)(s);function s(){return Object(h.a)(this,s),e.apply(this,arguments)}return Object(g.a)(s,[{key:"computeGuessCharColor",value:function(t,e,s,n){return n&&t.posMap.every((function(t){return t===j}))&&(this.gameObj.notInPool[s]=1),"white"}},{key:"styleForTotals",value:function(t){return{borderRadius:"50%",height:"20px",width:"20px",display:"inline-block",marginLeft:"10px",marginBottom:"5px",textAlign:"center",backgroundColor:t===L?"lightgreen":"yellow"}}},{key:"formatGuessTotals",value:function(t,e){var s=this,n=this.countVals(t.posMap),a=Object(y.a)(n,2),r=a[0],o=a[1];[L,x].forEach((function(t){var n=t===L?r:o;e.push(i.a.createElement("div",{style:s.styleForTotals(t)},n))}))}},{key:"countVals",value:function(t){var e=Array.from([0,0,0]);return t.forEach((function(t){return e[t-1]++})),e}},{key:"genCountSpans",value:function(t,e){var s=this.policyIncludes(P)?i.a.createElement("span",{style:this.styleForTotals(x)},e):"";return i.a.createElement(n.Fragment,null,i.a.createElement("span",{style:this.styleForTotals(L)},t),s)}},{key:"comparePosMaps",value:function(t,e,s,a){var r=this.countVals(t),o=Object(y.a)(r,2),u=o[0],l=o[1],c=this.countVals(e),h=Object(y.a)(c,2),g=h[0],m=h[1],p=null;return(u!==g||this.policyIncludes(P)&&l!==m)&&(p=i.a.createElement(n.Fragment,null,"from ".concat(a.guess,", need "),this.genCountSpans(u,l),",".concat(v).concat(v,"not "),this.genCountSpans(g,m))),p}},{key:"possibleListFilter",value:function(t,e){var s=this.countVals(t),n=Object(y.a)(s,2),i=n[0],a=n[1],r=this.countVals(e),o=Object(y.a)(r,2),u=o[0],l=o[1];return i===u&&a===l}}]),s}(b),S=s(15),C=s.n(S),O=String.fromCharCode(160),G=function(t){Object(m.a)(s,t);var e=Object(p.a)(s);function s(){var t;return Object(h.a)(this,s),(t=e.call(this)).state={settings:{}},t}return Object(g.a)(s,[{key:"updateSettings",value:function(t,e){this.settings[t]=e,this.setState({settings:this.settings})}},{key:"getSwitch",value:function(t){var e=this;return i.a.createElement("input",{type:"checkbox",checked:this.settings[t],onChange:function(){return e.updateSettings(t,!e.props.gameObj.settings[t])},id:t,height:15,width:30,style:{float:"left"}})}},{key:"genSwitchSetting",value:function(t,e){return i.a.createElement("div",{key:this.switchKey++,style:{float:"left",width:"300px"}},i.a.createElement("span",{style:{fontSize:"14px"}},"".concat(e).concat(O).concat(O)," "),i.a.createElement("div",{style:{float:"right"}},this.getSwitch(t)),i.a.createElement("br",null))}},{key:"genNumericInputSetting",value:function(t,e){var s=this;return i.a.createElement("div",{style:{float:"left",width:"320px"}},i.a.createElement("span",{style:{fontSize:"14px"}},e),i.a.createElement("div",{style:{float:"right"}},i.a.createElement(C.a,{id:t,min:5,max:8,value:this.settings[t]||"",onChange:function(e){return s.updateSettings(t,e)},style:{border:"1px solid black",input:{marginLeft:"5px",height:"18px",width:"40px"}}})))}},{key:"genRadioSetting",value:function(t,e,s,a,r){var o=this,u=r?"":i.a.createElement("br",null);return i.a.createElement(n.Fragment,null,i.a.createElement("input",{type:"radio",value:parseInt(e),name:t,key:a,checked:this.settings[t]===parseInt(e),style:{marginLeft:"15px"},onChange:function(t){var e=t.target.name,s=parseInt(t.target.value);o.updateSettings(e,s)}}),s,u)}},{key:"genRadioGroupSetting",value:function(t,e,s){var a=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=s.map((function(e,s){var n=Object(y.a)(e,2),i=n[0],o=n[1];return a.genRadioSetting(t,o,i,s,r)}));return i.a.createElement(n.Fragment,null,e,i.a.createElement("br",null),i.a.createElement("div",{value:this.settings[t]},o))}},{key:"render",value:function(){var t=this;return this.gameObj=this.props.gameObj,this.settings=this.gameObj.settings,this.switchKey=0,i.a.createElement("div",null,i.a.createElement("button",{style:{marginRight:"10px",marginBottom:"5px"},onClick:function(){t.gameObj.setState({useGamePage:!0}),t.gameObj.startNewGame()}},String.fromCharCode(11013)),"Settings (will start new Game)",i.a.createElement("br",null),i.a.createElement("div",{style:{width:"300px",display:"inline-block",fontSize:"14px"}},this.genRadioGroupSetting("wordlen","Word Length (longer=harder)",[["5",5],["6",6],["7",7],["8",8]],!0),i.a.createElement("br",null),this.genSwitchSetting("guessMustBeWord","Guess must be word? (harder)"),this.genSwitchSetting("noMarkGuessChars","Not Mark Guess Chars? (much harder)"),this.genSwitchSetting("allowPlurals","Allow Plurals of ".concat(this.settings.wordlen-1," letter words? (easier)")),!1,this.genSwitchSetting("useVirtKeyboard","Use Virtual Keyboard?"),this.genRadioGroupSetting("hintUsePolicy","Hint Reuse Requirements",[["None (most flexible)",0],["Must Reuse Green (slightly harder)",M],["Must Reuse Green and Yellow (harder)",M+P],["Must Reuse All Hints (hardest and annoying)",M+P+R]])))}}]),s}(n.Component),E=String.fromCharCode(160),L=1,x=2,j=3,M=2,P=4,R=8,I=["settings","answer","guessList","gameOver","message","illegalGuessCount"],H=function(t){Object(m.a)(s,t);var e=Object(p.a)(s);function s(){var t;Object(h.a)(this,s),t=e.call(this);var n=window.localStorage.getItem("wordguessSavedGame");return n?t.restoreSavedState(n):t.setDefaultGameState(),t.state=t.initReactState,t}return Object(g.a)(s,[{key:"setDefaultGameState",value:function(){console.log("setting default game state"),this.settings={wordlen:5,guessMustBeWord:!0,noMarkGuessChars:!1,hintUsePolicy:M,useVirtKeyboard:!1,allowPlurals:!1},this.answer="",this.focusRef=i.a.createRef(),this.usedDefaultGameState=!0,this.illegalGuessCount=0,this.message="",this.initReactState={layoutName:"default",input:"",letterMap:{},guessList:[],useGamePage:!1,settings:this.settings,message:this.message,illegalGuessCount:this.illegalGuessCount}}},{key:"restoreSavedState",value:function(){var t=Object(c.a)(l.a.mark((function t(e){var s,n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=JSON.parse(e),I.forEach((function(t){return n[t]=s[t]})),this.focusRef=i.a.createRef(),this.hintHandler=b.getHintHandler(this),this.usedDefaultGameState=!1,this.input="",this.tempAlert("Restored Saved Game State",1500),this.initReactState={layoutName:"default",letterMap:{},useGamePage:!0,settings:this.settings,input:this.input,gameOver:this.gameOver,illegalGuessCount:this.illegalGuessCount,guessList:this.guessList,message:this.gameOver?this.buildGameOverMessage():this.message},t.next=10,this.buildWordList(this.settings.wordlen);case 10:this.possibleList=Array.from(this.wordList),this.guessList.forEach((function(t){n.possibleList=n.getNewPossibleList(t.guess,t.posMap)})),this.setState({possibleListLen:this.possibleList.length});case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"tempAlert",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"red",n=document.createElement("div");return n.setAttribute("style","position:absolute;                             top:0%; left:10%;                              background-color:".concat(s,";                              border-color:black;                              border-width:1px;                              ")),n.innerHTML=t,setTimeout((function(){n.parentNode.removeChild(n)}),e),document.body.appendChild(n),new Promise((function(t){return setTimeout(t,e)}))}},{key:"componentDidMount",value:function(){var t=Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.usedDefaultGameState&&this.startNewGame(),this.focusRef&&this.focusRef.current&&this.focusRef.focus();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.focusRef&&this.focusRef.current&&(console.log("did update",this.focusref),this.focusRef.focus())}},{key:"startNewGame",value:function(){var t=Object(c.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.guessList=[],this.input="",this.hintHandler=b.getHintHandler(this),t.next=5,this.buildWordList(this.settings.wordlen);case 5:this.possibleList=Array.from(this.wordList),this.answer=this.wordList[Math.floor(Math.random()*this.wordList.length)].toUpperCase(),this.gameOver=!1,this.illegalGuessCount=0,this.setState({input:this.input,guessList:this.guessList,gameOver:!1,illegalGuessCount:this.illegalGuessCount,message:null}),this.focusRef.current&&this.focusRef.focus();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"buildWordList",value:function(){var t=Object(c.a)(l.a.mark((function t(e){var s,n,i,a,r=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.length>1&&void 0!==r[1]?r[1]:this.settings.allowPlurals,e!==this.curAnswerLen){t.next=3;break}return t.abrupt("return");case 3:return this.curAnswerLen=e,n="/wordguess/ospd".concat(s?"":"np").concat(e,".txt"),t.next=7,fetch(n);case 7:return i=t.sent,console.log("fetch complete"),t.next=11,i.text();case 11:return a=t.sent,t.next=14,a.split("\n");case 14:return this.wordList=t.sent,t.next=17,this.wordList.map((function(t){return t.toUpperCase()}));case 17:this.wordList=t.sent,console.log("wordlist for len ".concat(e," built"));case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"doCompare",value:function(t,e){var s=Object(o.a)(t),n=Object(o.a)(e),i=new Array(this.settings.wordlen).fill(j);return s.forEach((function(t,e){t===n[e]&&(n[e]=null,s[e]=null,i[e]=L)})),s.forEach((function(t,e){if(null!==t){var s=n.indexOf(t);s>=0&&(n[s]=null,i[e]=x)}})),i}},{key:"mostRecentGuess",value:function(){return this.guessList.length>0?this.guessList.slice(-1)[0]:null}},{key:"getNewPossibleList",value:function(t,e){var s=this;return this.possibleList.filter((function(n){var i=s.doCompare(t,n);return s.hintHandler.possibleListFilter(i,e)}))}},{key:"doInputSubmit",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e,s,n,i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!0,this.input.length===this.answer.length){t.next=3;break}return t.abrupt("return");case 3:this.settings.guessMustBeWord&&!this.wordList.includes(this.input)?(this.setMessage("Guess must be in wordlist ".concat(this.settings.allowPlurals?"":", plurals are disabled")),e=!1):0!==this.settings.hintUsePolicy&&this.guessList.length>0&&(s=this.hintHandler.checkUseAllHints(this.input))&&(this.setMessage(s,"rgb(230,230,230)"),e=!1),e&&(n=this.doCompare(this.input,this.answer),this.guessList.push({guess:this.input,index:this.guessList.length,posMap:n}),this.possibleList=this.getNewPossibleList(this.input,n),n.every((function(t){return t===L}))&&(this.gameOver=!0,this.setState({gameOver:!0,message:this.buildGameOverMessage()}))),e?(this.input="",this.settings.useVirtKeyboard&&this.keyboard.clearInput()):(this.illegalGuessCount++,this.setState({illegalGuessCount:this.illegalGuessCount})),this.setState({input:this.input,guessList:this.guessList}),i=[].concat(I,Object(o.a)(Object.keys(this.settings)),["guess","index","posMap"]),a=JSON.stringify(this,i),window.localStorage.wordguessSavedGame=a;case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"commonKeyHandler",value:function(t){this.state.gameOver||("?"===t&&console.log("this.answer =",this.answer),"Backspace"===t&&null!=this.state.message&&this.setState({message:null}),["Enter","{enter}"].includes(t)?this.doInputSubmit():"Backspace"===t&&this.input.length>0?(this.input=this.input.slice(0,-1),this.setState({input:this.input})):(t=t.toUpperCase(),"ABCDEFGHIJKLMNOPQRSTUVWXYZ".includes(t)&&(this.input+=t,this.input.length>this.answer.length&&(this.input=this.input.substring(0,this.answer.length)),this.setState({input:this.input}))))}},{key:"onVirtKeyPress",value:function(t){this.commonKeyHandler(t)}},{key:"onRealKeyDown",value:function(t){var e=t.nativeEvent.key;this.commonKeyHandler(e)}},{key:"onChange",value:function(t){t.length>this.answer.length&&(t=t.substring(0,this.answer.length),this.keyboard.setInput(t)),this.input=t,this.setState({input:t})}},{key:"formatGuess",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=[],n=t.guess,a=0;a<this.answer.length;a++){var r=a<n.length?n[a]:E,o=this.hintHandler.computeGuessCharColor(t,a,r,e);s.push(i.a.createElement("div",{key:a,style:{border:"1px solid black",backgroundColor:o,height:"20px",width:"20px",display:"inline-block",marginLeft:"5px",marginBottom:"5px",marginTop:"5px",textAlign:"center"}},r))}return e&&this.hintHandler.formatGuessTotals(t,s),s}},{key:"getVirtKeyboard",value:function(){var t=this;return this.settings.useVirtKeyboard?i.a.createElement(d.a,{keyboardRef:function(e){return t.keyboard=e},onKeyPress:this.onVirtKeyPress.bind(this),onChange:this.onChange.bind(this),theme:"hg-theme-default hg-layout-default myTheme",layoutName:this.state.layoutName,layout:{default:["Q W E R T Y U I O P","A S D F G H J K L","Z X C V B N M {bksp} {enter}"]},buttonTheme:[{class:"hg-yellow",buttons:this.yellowString},{class:"hg-green",buttons:this.greenString},{class:"hg-grey",buttons:this.greyString}],display:{"{enter}":"enter","{bksp}":"<<"}}):i.a.createElement(n.Fragment,null)}},{key:"buildGameOverMessage",value:function(){var t=this.guessList.length;return{html:"Match after ".concat(t," ").concat(1===t?"guess":"guesses","!"),bgcolor:"white",msgButton:i.a.createElement("button",{onClick:this.startNewGame.bind(this),style:{marginLeft:"5px"}},"Again")}}},{key:"setMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pink",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={html:t,bgcolor:e,msgButton:s};this.setState({message:n})}},{key:"genMessageLine",value:function(){if(null===this.state.message)return i.a.createElement(n.Fragment,null);var t=null===this.state.message.msgButton?i.a.createElement(n.Fragment,null):this.state.message.msgButton;return i.a.createElement("div",{style:{backgroundColor:this.state.message.bgcolor}},i.a.createElement(i.a.Fragment,null,this.state.message.html),t)}},{key:"getPoolChars",value:function(){var t=this;return Object(o.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZ").filter((function(e){return 1!==t.notInPool[e]}))}},{key:"render",value:function(){var t=this;if(!this.state||0===Object.keys(this.state).length)return null;this.yellowString=" ",this.greenString=" ",this.greyString=" ",this.notInPool={};var e=[];if(this.guessJsxIndex=0,this.state.guessList.forEach((function(s){e.push(i.a.createElement(n.Fragment,{key:t.guessJsxIndex++},t.formatGuess(s,!0))),e.push(i.a.createElement("br",{key:t.guessJsxIndex++}))})),!this.state.gameOver&&void 0!==this.state.input){var s={guess:this.state.input,posMap:new Array(this.settings.wordlen).fill(j)};e.push(this.formatGuess(s,!1))}var a=0===this.state.guessList.length?" ":"Pool: ".concat(this.getPoolChars().join(" ")),r=this.state.guessList.length,o=this.state.illegalGuessCount,u="Guesses Legal: ".concat(r);this.settings.countIllegalGuesses&&(u="".concat(u,", Illegal: ").concat(o));return this.state.useGamePage?i.a.createElement(n.Fragment,null,i.a.createElement("div",null,i.a.createElement("button",{style:{marginRight:"10px"},onClick:function(){return t.setState({useGamePage:!1})}},String.fromCharCode(9881)),"WordGuess Game,   ".concat(t.possibleList?t.possibleList.length:0," Possible")),i.a.createElement("div",{onKeyDown:t.onRealKeyDown.bind(t),tabIndex:0,ref:function(e){return t.focusRef=e}},e,t.genMessageLine()),a,i.a.createElement("br",null),u,i.a.createElement("br",null),t.getVirtKeyboard()):i.a.createElement(G,{gameObj:this})}}]),s}(n.Component);r.a.render(i.a.createElement(H,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.60025c73.chunk.js.map